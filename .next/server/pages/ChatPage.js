"use strict";(()=>{var e={};e.id=815,e.ids=[220,815],e.modules={198:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7671).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},598:e=>{e.exports=import("@radix-ui/react-label")},802:e=>{e.exports=import("clsx")},840:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>f,default:()=>x,getServerSideProps:()=>g,getStaticPaths:()=>u,getStaticProps:()=>p,reportWebVitals:()=>b,routeModule:()=>k,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var r=s(5544),l=s(1702),i=s(4014),n=s(8964),o=s.n(n),c=s(1588),d=s.n(c),m=s(6357),h=e([m]);m=(h.then?(await h)():h)[0];let x=(0,i.M)(m,"default"),p=(0,i.M)(m,"getStaticProps"),u=(0,i.M)(m,"getStaticPaths"),g=(0,i.M)(m,"getServerSideProps"),f=(0,i.M)(m,"config"),b=(0,i.M)(m,"reportWebVitals"),j=(0,i.M)(m,"unstable_getStaticProps"),y=(0,i.M)(m,"unstable_getStaticPaths"),v=(0,i.M)(m,"unstable_getStaticParams"),N=(0,i.M)(m,"unstable_getServerProps"),w=(0,i.M)(m,"unstable_getServerSideProps"),k=new r.PagesRouteModule({definition:{kind:l.A.PAGES,page:"/ChatPage",pathname:"/ChatPage",bundlePath:"",filename:""},components:{App:d(),Document:o()},userland:m});a()}catch(e){a(e)}})},851:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7671).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},971:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{T:()=>o});var r=s(8732),l=s(2015),i=s(2488),n=e([i]);i=(n.then?(await n)():n)[0];let o=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-zinc-200 bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:border-zinc-800 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",e),ref:s,...t}));o.displayName="Textarea",a()}catch(e){a(e)}})},1130:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7671).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},1936:(e,t,s)=>{s.d(t,{BC:()=>i,QJ:()=>l,Qb:()=>n});var a=s(5839);let r={headers:{"Content-Type":"application/json"}};async function l(e,t={}){try{let s=await fetch("https://api.search1api.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.model||"deepseek-r1-70b-online",messages:[{role:"system",content:t.systemPrompt||"أنت مساعد ذكي ومفيد."},{role:"user",content:e}],temperature:t.temperature||.7,max_tokens:t.maxTokens||1024,stream:t.stream||!1})});if(!s.ok){let e=await s.text();throw Error(e||`خطأ في الاتصال بـ DeepSeek API: ${s.status}`)}if(t.stream)return o(s,t.onChunk);return s.json()}catch(e){throw console.error("Error calling DeepSeek model:",e),e}}async function i(e,t={}){if(!a.Km.OPENROUTER_API_KEY)throw Error("مفتاح API لـ OpenRouter غير متوفر");try{let s=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.Km.OPENROUTER_API_KEY}`,"HTTP-Referer":a.Km.NEXT_PUBLIC_APP_URL||"https://cyberai-os.vercel.app","X-Title":"CyberAI OS"},body:JSON.stringify({model:t.model||"openai/gpt-4o",messages:[{role:"system",content:t.systemPrompt||"أنت مساعد ذكي ومفيد."},{role:"user",content:e}],temperature:t.temperature||.7,max_tokens:t.maxTokens||1024,stream:t.stream||!1})});if(!s.ok){let e=await s.text();throw Error(e||`خطأ في الاتصال بـ OpenRouter: ${s.status}`)}if(t.stream)return o(s,t.onChunk);return s.json()}catch(e){throw console.error("Error calling OpenRouter model:",e),e}}async function n(e,t={}){if(!a.Km.TOGETHER_API_KEY)throw Error("مفتاح API لـ Together.xyz غير متوفر");try{let s=await fetch("https://api.together.xyz/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.Km.TOGETHER_API_KEY}`},body:JSON.stringify({model:t.model||"deepseek-ai/DeepSeek-R1-Distill-Llama-70B-free",messages:[{role:"system",content:t.systemPrompt||"أنت مساعد ذكي ومفيد."},{role:"user",content:e}],temperature:t.temperature||.7,max_tokens:t.maxTokens||1024,stream:t.stream||!1})});if(!s.ok){let e=await s.text();throw Error(e||`خطأ في الاتصال بـ Together.xyz: ${s.status}`)}if(t.stream)return o(s,t.onChunk);return s.json()}catch(e){throw console.error("Error calling Together model:",e),e}}async function o(e,t){let s=e.body?.getReader();if(!s)throw Error("لا يمكن قراءة استجابة المجرى");let a=new TextDecoder,r="",l={choices:[{message:{content:""}}]};try{for(;;){let{done:e,value:i}=await s.read();if(e)break;let n=a.decode(i,{stream:!0}),o=(r+=n).split("\n");for(let e of(r=o.pop()||"",o))if(""!==e.trim()&&"data: [DONE]"!==e.trim())try{let s=e.match(/^data: (.*)$/i);if(!s)continue;let a=JSON.parse(s[1]),r=a.choices?.[0]?.delta?.content||a.choices?.[0]?.message?.content||"";r&&(l.choices[0].message.content+=r,t&&t({content:r}))}catch(e){console.warn("Error parsing stream chunk:",e)}}}finally{s.releaseLock()}return l}},2015:e=>{e.exports=require("react")},2248:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{w:()=>c});var r=s(8732),l=s(2015),i=s(8827),n=s(2488),o=e([i,n]);[i,n]=o.then?(await o)():o;let c=l.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...a},l)=>(0,r.jsx)(i.Root,{ref:l,decorative:s,orientation:t,className:(0,n.cn)("shrink-0 bg-zinc-200 dark:bg-zinc-800","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));c.displayName=i.Root.displayName,a()}catch(e){a(e)}})},2330:(e,t,s)=>{s.d(t,{Ml:()=>i,gC:()=>l});var a=s(5839);let r="cyberai_os_secure_key";function l(e,t){if(a.Km.ENABLE_LOCAL_STORAGE)try{let s=function(e,t=r){if(!a.Km.ENCRYPT_LOCAL_DATA)return JSON.stringify(e);try{let s=JSON.stringify(e);return btoa(s+t)}catch(t){return console.error("Error encrypting data:",t),JSON.stringify(e)}}(t);localStorage.setItem(e,s)}catch(t){console.error(`Error saving data to localStorage (${e}):`,t)}}function i(e,t){if(!a.Km.ENABLE_LOCAL_STORAGE)return t;try{let s=localStorage.getItem(e);if(!s)return t;return function(e,t=r){if(!a.Km.ENCRYPT_LOCAL_DATA)try{return JSON.parse(e)}catch(e){return null}try{let s=atob(e);if(s.endsWith(t))return JSON.parse(s.substring(0,s.length-t.length));return JSON.parse(e)}catch(t){console.error("Error decrypting data:",t);try{return JSON.parse(e)}catch{return null}}}(s)||t}catch(s){return console.error(`Error retrieving data from localStorage (${e}):`,s),t}}},2377:e=>{e.exports=import("@radix-ui/react-slider")},2549:e=>{e.exports=import("@radix-ui/react-avatar")},2620:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>c});var r=s(8732),l=s(2015),i=s(2377),n=s(2488),o=e([i,n]);[i,n]=o.then?(await o)():o;let c=l.forwardRef(({className:e,...t},s)=>(0,r.jsxs)(i.Root,{ref:s,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",e),...t,children:[(0,r.jsx)(i.Track,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-zinc-900/20 dark:bg-zinc-50/20",children:(0,r.jsx)(i.Range,{className:"absolute h-full bg-zinc-900 dark:bg-zinc-50"})}),(0,r.jsx)(i.Thumb,{className:"block h-4 w-4 rounded-full border border-zinc-200 border-zinc-900/50 bg-white shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:border-zinc-800 dark:border-zinc-50/50 dark:bg-zinc-950 dark:focus-visible:ring-zinc-300"})]}));c.displayName=i.Root.displayName,a()}catch(e){a(e)}})},3873:e=>{e.exports=require("path")},4079:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7671).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},4197:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{bq:()=>p,eb:()=>b,gC:()=>f,l6:()=>h,yv:()=>x});var r=s(8732),l=s(2015),i=s(7860),n=s(198),o=s(5581),c=s(5776),d=s(2488),m=e([i,d]);[i,d]=m.then?(await m)():m;let h=i.Root;i.Group;let x=i.Value,p=l.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(i.Trigger,{ref:a,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-zinc-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-zinc-800 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus:ring-zinc-300",e),...s,children:[t,(0,r.jsx)(i.Icon,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=i.Trigger.displayName;let u=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.ScrollUpButton,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}));u.displayName=i.ScrollUpButton.displayName;let g=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.ScrollDownButton,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));g.displayName=i.ScrollDownButton.displayName;let f=l.forwardRef(({className:e,children:t,position:s="popper",...a},l)=>(0,r.jsx)(i.Portal,{children:(0,r.jsxs)(i.Content,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[(0,r.jsx)(u,{}),(0,r.jsx)(i.Viewport,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(g,{})]})}));f.displayName=i.Content.displayName,l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.Label,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",e),...t})).displayName=i.Label.displayName;let b=l.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(i.Item,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",e),...s,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.ItemIndicator,{children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.ItemText,{children:t})]}));b.displayName=i.Item.displayName,l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.Separator,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",e),...t})).displayName=i.Separator.displayName,a()}catch(e){a(e)}})},4245:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7671).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5581:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7671).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},5979:e=>{e.exports=import("tailwind-merge")},6357:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>T});var r=s(8732),l=s(2015),i=s(557),n=s(6939),o=s(7389),c=s(6644),d=s(4197),m=s(971),h=s(7852),x=s(2620),p=s(6437),u=s(9949),g=s(2248),f=s(617),b=s(9401),j=s(4079),y=s(1579),v=s(851),N=s(6136),w=s(4245),k=s(198),S=s(5581),A=s(1130),z=s(9801),C=s(5839),R=s(1936),P=s(2330),_=e([i,n,o,c,d,m,h,x,p,u,g,z]);[i,n,o,c,d,m,h,x,p,u,g,z]=_.then?(await _)():_;let T=()=>{let[e,t]=(0,l.useState)("chat"),[s,a]=(0,l.useState)(""),[_,T]=(0,l.useState)([]),[E,D]=(0,l.useState)(null),[O,$]=(0,l.useState)(!1),[M,L]=(0,l.useState)("deepseek-r1-70b"),[I,J]=(0,l.useState)(.7),[B,K]=(0,l.useState)(1024),[V,U]=(0,l.useState)(!1),[F,q]=(0,l.useState)("أنت مساعد ذكي ومفيد تقدم إجابات دقيقة وواضحة."),[Y,G]=(0,l.useState)(!0),H=(0,l.useRef)(null),X=(0,l.useRef)(null),[Q,W]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=(0,P.Ml)("cyberai_conversations",[]);T(e),0===e.length?Z():D(e[0]);let t=(0,P.Ml)("cyberai_selected_model","deepseek-r1-70b"),s=(0,P.Ml)("cyberai_temperature",.7),a=(0,P.Ml)("cyberai_max_tokens",1024),r=(0,P.Ml)("cyberai_system_prompt","أنت مساعد ذكي ومفيد تقدم إجابات دقيقة وواضحة."),l=(0,P.Ml)("cyberai_stream_responses",!0);L(t),J(s),K(a),q(r),G(l)},[]),(0,l.useEffect)(()=>{_.length>0&&(0,P.gC)("cyberai_conversations",_)},[_]),(0,l.useEffect)(()=>{(0,P.gC)("cyberai_selected_model",M),(0,P.gC)("cyberai_temperature",I),(0,P.gC)("cyberai_max_tokens",B),(0,P.gC)("cyberai_system_prompt",F),(0,P.gC)("cyberai_stream_responses",Y)},[M,I,B,F,Y]),(0,l.useEffect)(()=>{H.current?.scrollIntoView({behavior:"smooth"})},[E?.messages]);let Z=()=>{let e={id:`conv-${Date.now()}`,title:`محادثة جديدة ${_.length+1}`,messages:[],model:M,createdAt:new Date,updatedAt:new Date};T([e,..._]),D(e),a(""),t("chat")},ee=async()=>{if(!s.trim()||!E||O)return;let e={id:`msg-${Date.now()}`,role:"user",content:s,timestamp:new Date},t={...E,messages:[...E.messages,e],updatedAt:new Date};D(t),T(_.map(e=>e.id===t.id?t:e)),a(""),$(!0),W("");try{let e;if(Y){let e={id:`msg-${Date.now()+1}`,role:"assistant",content:"",timestamp:new Date},s={...t,messages:[...t.messages,e],updatedAt:new Date};D(s),T(_.map(e=>e.id===s.id?s:e))}if("deepseek-r1-70b"===M)e=await (0,R.QJ)(s,{model:"deepseek-r1-70b-online",systemPrompt:F,temperature:I,maxTokens:B,stream:Y,onChunk:et});else if("deepseek-r1-distill-llama-70b"===M)e=await (0,R.Qb)(s,{model:"deepseek-ai/DeepSeek-R1-Distill-Llama-70B-free",systemPrompt:F,temperature:I,maxTokens:B,stream:Y,onChunk:et});else if("openrouter-gpt-4o"===M)e=await (0,R.BC)(s,{model:"openai/gpt-4o",systemPrompt:F,temperature:I,maxTokens:B,stream:Y,onChunk:et});else throw Error("النموذج غير مدعوم");if(!Y){let s={id:`msg-${Date.now()+1}`,role:"assistant",content:e.choices[0].message.content,timestamp:new Date},a={...t,messages:[...t.messages,s],updatedAt:new Date};D(a),T(_.map(e=>e.id===a.id?a:e))}if(1===t.messages.length){let e=s.length>30?`${s.substring(0,30)}...`:s,t={...E,title:e};D(t),T(_.map(e=>e.id===t.id?t:e))}}catch(a){console.error("Error sending message:",a);let e={id:`msg-${Date.now()+1}`,role:"assistant",content:"عذراً، حدث خطأ أثناء معالجة رسالتك. يرجى المحاولة مرة أخرى لاحقاً.",timestamp:new Date},s={...t,messages:[...t.messages,e],updatedAt:new Date};D(s),T(_.map(e=>e.id===s.id?s:e))}finally{$(!1),setTimeout(()=>{X.current?.focus()},100)}},et=e=>{if(e.content&&(W(t=>t+e.content),E)){let t=[...E.messages],s=t.length-1;if(s>=0&&"assistant"===t[s].role){t[s]={...t[s],content:Q+e.content};let a={...E,messages:t,updatedAt:new Date};D(a),T(_.map(e=>e.id===a.id?a:e))}}},es=e=>{let t=_.filter(t=>t.id!==e);T(t),E?.id===e&&(t.length>0?D(t[0]):Z())};return(0,r.jsx)("div",{className:"chat-page py-8 px-4",children:(0,r.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,r.jsxs)("div",{className:"page-header mb-8 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("img",{src:`${C.Km.BASE_URL}assets/logo-wolf-cosmic.png`,alt:"CyberAI OS Logo",className:"w-16 h-16 object-contain"})}),(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"المحادثة الذكية"}),(0,r.jsx)("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"تحدث مع نماذج الذكاء الاصطناعي المختلفة واحصل على إجابات لأسئلتك"})]}),!(0,C.$M)()&&!(0,C.oY)()&&(0,r.jsxs)(z.Fc,{variant:"warning",className:"mb-6",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),(0,r.jsx)(z.XL,{children:"تنبيه"}),(0,r.jsx)(z.TN,{children:"بعض مفاتيح API غير متوفرة. قد لا تتمكن من استخدام بعض النماذج السحابية."})]}),(0,r.jsxs)("div",{className:"chat-container grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"conversations-sidebar md:col-span-1",children:(0,r.jsx)(n.Zp,{className:"h-full",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)(i.$,{variant:"default",className:"w-full mb-4",onClick:Z,children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"محادثة جديدة"]}),(0,r.jsx)("div",{className:"conversations-list space-y-2 max-h-[500px] overflow-y-auto",children:_.map(e=>(0,r.jsxs)("div",{className:`conversation-item p-3 rounded-md cursor-pointer transition-colors ${E?.id===e.id?"bg-primary/10 border border-primary/20":"hover:bg-background-light"}`,onClick:()=>{D(e),t("chat")},children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("div",{className:"conversation-title font-medium truncate",children:e.title}),(0,r.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:t=>{t.stopPropagation(),confirm("هل أنت متأكد من حذف هذه المحادثة؟")&&es(e.id)},children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})]}),(0,r.jsxs)("div",{className:"conversation-meta flex items-center text-xs text-muted-foreground mt-1",children:[(0,r.jsx)(h.E,{variant:"outline",className:"text-xs font-normal",children:e.model.includes("deepseek")?"DeepSeek":e.model.includes("openrouter")?"OpenRouter":"Local"}),(0,r.jsx)("span",{className:"mx-2",children:"•"}),(0,r.jsx)("span",{children:new Date(e.updatedAt).toLocaleDateString("ar-SA",{day:"numeric",month:"short"})})]})]},e.id))})]})})}),(0,r.jsx)("div",{className:"chat-main md:col-span-3",children:(0,r.jsxs)(n.Zp,{className:"h-full flex flex-col",children:[(0,r.jsx)("div",{className:"chat-header border-b border-border p-4",children:(0,r.jsx)(o.tU,{defaultValue:"chat",value:e,onValueChange:t,children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(o.j7,{children:[(0,r.jsxs)(o.Xi,{value:"chat",className:"flex items-center gap-2",children:[(0,r.jsx)(j.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"المحادثة"})]}),(0,r.jsxs)(o.Xi,{value:"settings",className:"flex items-center gap-2",children:[(0,r.jsx)(y.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"الإعدادات"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{if(!E)return;let e=E.messages.map(e=>{let t="user"===e.role?"أنت":"assistant"===e.role?"المساعد":"النظام";return`${t}: ${e.content}`}).join("\n\n");navigator.clipboard.writeText(e).then(()=>{alert("تم نسخ المحادثة إلى الحافظة")},e=>{console.error("فشل في نسخ النص: ",e)})},title:"نسخ المحادثة",children:(0,r.jsx)(v.A,{className:"h-4 w-4"})}),(0,r.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{if(!E)return;let e=E.messages.map(e=>{let t="user"===e.role?"أنت":"assistant"===e.role?"المساعد":"النظام";return`${t}: ${e.content}`}).join("\n\n"),t=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${E.title.replace(/\s+/g,"_")}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},title:"تنزيل المحادثة",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})]})})}),(0,r.jsxs)(o.av,{value:"chat",className:"flex-1 flex flex-col p-0 m-0",children:[(0,r.jsxs)("div",{className:"chat-messages flex-1 overflow-y-auto p-4 space-y-4",children:[E?.messages.length===0?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[(0,r.jsx)("img",{src:`${C.Km.BASE_URL}assets/chat-preview.png`,alt:"Chat Preview",className:"w-64 h-auto mb-6"}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-2",children:"ابدأ محادثة جديدة"}),(0,r.jsx)("p",{className:"text-muted-foreground max-w-md",children:"اطرح سؤالاً أو اطلب مساعدة في أي موضوع. يمكنك التحدث بحرية مع النموذج المختار."})]}):E?.messages.map(e=>r.jsx("div",{className:`message-container flex ${"user"===e.role?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`message max-w-[80%] p-4 rounded-lg ${"user"===e.role?"bg-primary/10 text-foreground":"bg-background-light text-foreground"}`,children:[r.jsxs("div",{className:"message-header flex items-center mb-2",children:[r.jsxs("div",{className:`avatar-container flex items-center ${"user"===e.role?"text-primary":"text-accent"}`,children:[r.jsx(c.eu,{className:"h-6 w-6 mr-2",children:"user"===e.role?r.jsx(w.A,{className:"h-4 w-4"}):r.jsx(j.A,{className:"h-4 w-4"})}),r.jsx("span",{className:"font-medium",children:"user"===e.role?"أنت":"المساعد"})]}),r.jsx("span",{className:"text-xs text-muted-foreground mr-auto",children:new Date(e.timestamp).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("div",{className:"message-content whitespace-pre-wrap",children:e.content})]})},e.id)),(0,r.jsx)("div",{ref:H})]}),(0,r.jsxs)("div",{className:"chat-input border-t border-border p-4",children:[(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(m.T,{ref:X,placeholder:"اكتب رسالتك هنا...",value:s,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ee())},className:"min-h-[80px] pr-12",disabled:O}),(0,r.jsx)(i.$,{variant:"ghost",size:"icon",className:"absolute bottom-2 right-2",onClick:()=>U(!V),children:V?(0,r.jsx)(k.A,{className:"h-5 w-5 text-muted-foreground"}):(0,r.jsx)(S.A,{className:"h-5 w-5 text-muted-foreground"})})]}),(0,r.jsx)(i.$,{onClick:ee,disabled:!s.trim()||O,className:"h-10 px-4",children:O?(0,r.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}):(0,r.jsx)(A.A,{className:"h-5 w-5"})})]}),V&&(0,r.jsxs)("div",{className:"chat-settings mt-4 p-4 bg-background-light rounded-lg",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"model-selector",children:[(0,r.jsx)(u.J,{htmlFor:"model-select",className:"block mb-2",children:"النموذج"}),(0,r.jsxs)(d.l6,{value:M,onValueChange:L,disabled:O,children:[(0,r.jsx)(d.bq,{id:"model-select",children:(0,r.jsx)(d.yv,{placeholder:"اختر النموذج"})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"deepseek-r1-70b",children:"DeepSeek-R1-70B (Search1API)"}),(0,r.jsx)(d.eb,{value:"deepseek-r1-distill-llama-70b",disabled:!(0,C.oY)(),children:"DeepSeek-R1-Distill-Llama-70B (Together)"}),(0,r.jsx)(d.eb,{value:"openrouter-gpt-4o",disabled:!(0,C.$M)(),children:"GPT-4o (OpenRouter)"})]})]})]}),(0,r.jsxs)("div",{className:"temperature-selector",children:[(0,r.jsxs)(u.J,{htmlFor:"temperature-slider",className:"block mb-2",children:["درجة الإبداعية: ",I]}),(0,r.jsx)(x.A,{id:"temperature-slider",min:0,max:1,step:.1,value:[I],onValueChange:e=>J(e[0]),disabled:O}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,r.jsx)("span",{children:"دقيق"}),(0,r.jsx)("span",{children:"متوازن"}),(0,r.jsx)("span",{children:"إبداعي"})]})]}),(0,r.jsxs)("div",{className:"max-tokens-selector",children:[(0,r.jsxs)(u.J,{htmlFor:"max-tokens-slider",className:"block mb-2",children:["الحد الأقصى للكلمات: ",B]}),(0,r.jsx)(x.A,{id:"max-tokens-slider",min:256,max:4096,step:256,value:[B],onValueChange:e=>K(e[0]),disabled:O}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,r.jsx)("span",{children:"قصير"}),(0,r.jsx)("span",{children:"متوسط"}),(0,r.jsx)("span",{children:"طويل"})]})]}),(0,r.jsx)("div",{className:"stream-toggle",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u.J,{htmlFor:"stream-toggle",className:"cursor-pointer",children:"عرض الإجابة تدريجياً"}),(0,r.jsx)(p.d,{id:"stream-toggle",checked:Y,onCheckedChange:G,disabled:O})]})})]}),(0,r.jsx)(g.w,{className:"my-4"}),(0,r.jsxs)("div",{className:"system-prompt",children:[(0,r.jsx)(u.J,{htmlFor:"system-prompt",className:"block mb-2",children:"توجيهات النظام"}),(0,r.jsx)(m.T,{id:"system-prompt",placeholder:"أدخل توجيهات للنموذج...",value:F,onChange:e=>q(e.target.value),className:"min-h-[80px]",disabled:O}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"هذه التوجيهات تحدد سلوك النموذج وطريقة استجابته."})]})]})]})]}),(0,r.jsx)(o.av,{value:"settings",className:"p-4 m-0",children:(0,r.jsxs)("div",{className:"settings-container space-y-6",children:[(0,r.jsxs)("div",{className:"model-settings",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4",children:"إعدادات النموذج"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"model-selector",children:[(0,r.jsx)(u.J,{htmlFor:"settings-model-select",className:"block mb-2",children:"النموذج الافتراضي"}),(0,r.jsxs)(d.l6,{value:M,onValueChange:L,disabled:O,children:[(0,r.jsx)(d.bq,{id:"settings-model-select",children:(0,r.jsx)(d.yv,{placeholder:"اختر النموذج"})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"deepseek-r1-70b",children:"DeepSeek-R1-70B (Search1API)"}),(0,r.jsx)(d.eb,{value:"deepseek-r1-distill-llama-70b",disabled:!(0,C.oY)(),children:"DeepSeek-R1-Distill-Llama-70B (Together)"}),(0,r.jsx)(d.eb,{value:"openrouter-gpt-4o",disabled:!(0,C.$M)(),children:"GPT-4o (OpenRouter)"})]})]})]}),(0,r.jsxs)("div",{className:"temperature-selector",children:[(0,r.jsxs)(u.J,{htmlFor:"settings-temperature-slider",className:"block mb-2",children:["درجة الإبداعية الافتراضية: ",I]}),(0,r.jsx)(x.A,{id:"settings-temperature-slider",min:0,max:1,step:.1,value:[I],onValueChange:e=>J(e[0]),disabled:O}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,r.jsx)("span",{children:"دقيق"}),(0,r.jsx)("span",{children:"متوازن"}),(0,r.jsx)("span",{children:"إبداعي"})]})]})]})]}),(0,r.jsx)(g.w,{}),(0,r.jsxs)("div",{className:"system-prompt-settings",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4",children:"توجيهات النظام الافتراضية"}),(0,r.jsx)(m.T,{placeholder:"أدخل توجيهات افتراضية للنموذج...",value:F,onChange:e=>q(e.target.value),className:"min-h-[120px]",disabled:O}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"هذه التوجيهات ستستخدم لجميع المحادثات الجديدة. يمكنك تخصيص التوجيهات لكل محادثة على حدة."})]}),(0,r.jsx)(g.w,{}),(0,r.jsxs)("div",{className:"api-settings",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4",children:"إعدادات API"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(u.J,{htmlFor:"openrouter-api-key",className:"block mb-2",children:"مفتاح OpenRouter API"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:(0,C.$M)()?"مفتاح API متوفر. يمكنك استخدام نموذج GPT-4o.":"مفتاح API غير متوفر. أضف المفتاح في ملف .env."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.J,{htmlFor:"together-api-key",className:"block mb-2",children:"مفتاح Together.xyz API"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:(0,C.oY)()?"مفتاح API متوفر. يمكنك استخدام نموذج DeepSeek-R1-Distill-Llama-70B.":"مفتاح API غير متوفر. أضف المفتاح في ملف .env."})]})]})]}),(0,r.jsx)(g.w,{}),(0,r.jsxs)("div",{className:"conversation-settings",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4",children:"إعدادات المحادثة"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(u.J,{htmlFor:"max-tokens-setting",className:"block mb-2",children:"الحد الأقصى للكلمات الافتراضي"}),(0,r.jsxs)(d.l6,{value:B.toString(),onValueChange:e=>K(Number(e)),children:[(0,r.jsx)(d.bq,{id:"max-tokens-setting",children:(0,r.jsx)(d.yv,{placeholder:"اختر الحد الأقصى للكلمات"})}),(0,r.jsxs)(d.gC,{children:[(0,r.jsx)(d.eb,{value:"256",children:"256 (قصير)"}),(0,r.jsx)(d.eb,{value:"512",children:"512"}),(0,r.jsx)(d.eb,{value:"1024",children:"1024 (متوسط)"}),(0,r.jsx)(d.eb,{value:"2048",children:"2048"}),(0,r.jsx)(d.eb,{value:"4096",children:"4096 (طويل)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u.J,{htmlFor:"stream-setting",className:"cursor-pointer",children:"عرض الإجابة تدريجياً"}),(0,r.jsx)(p.d,{id:"stream-setting",checked:Y,onCheckedChange:G})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"عند تفعيل هذا الخيار، ستظهر إجابات النموذج تدريجياً أثناء إنشائها."})]})]})]})]})})]})})]})]})})};a()}catch(e){a(e)}})},6437:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{d:()=>c});var r=s(8732),l=s(2015),i=s(9812),n=s(2488),o=e([i,n]);[i,n]=o.then?(await o)():o;let c=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.Root,{className:(0,n.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-zinc-900 data-[state=unchecked]:bg-zinc-200 dark:focus-visible:ring-zinc-300 dark:focus-visible:ring-offset-zinc-950 dark:data-[state=checked]:bg-zinc-50 dark:data-[state=unchecked]:bg-zinc-800",e),...t,ref:s,children:(0,r.jsx)(i.Thumb,{className:(0,n.cn)("pointer-events-none block h-4 w-4 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 dark:bg-zinc-950")})}));c.displayName=i.Root.displayName,a()}catch(e){a(e)}})},6644:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{eu:()=>c});var r=s(8732),l=s(2015),i=s(2549),n=s(2488),o=e([i,n]);[i,n]=o.then?(await o)():o;let c=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.Root,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));c.displayName=i.Root.displayName,l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.Image,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",e),...t})).displayName=i.Image.displayName,l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.Fallback,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",e),...t})).displayName=i.Fallback.displayName,a()}catch(e){a(e)}})},7259:e=>{e.exports=import("@radix-ui/react-tabs")},7860:e=>{e.exports=import("@radix-ui/react-select")},8732:e=>{e.exports=require("react/jsx-runtime")},8827:e=>{e.exports=import("@radix-ui/react-separator")},8938:e=>{e.exports=import("class-variance-authority")},9640:e=>{e.exports=import("@radix-ui/react-slot")},9812:e=>{e.exports=import("@radix-ui/react-switch")},9949:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{J:()=>m});var r=s(8732),l=s(2015),i=s(598),n=s(8938),o=s(2488),c=e([i,n,o]);[i,n,o]=c.then?(await c)():c;let d=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.Root,{ref:s,className:(0,o.cn)(d(),e),...t}));m.displayName=i.Root.displayName,a()}catch(e){a(e)}})}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[964,161],()=>s(840));module.exports=a})();