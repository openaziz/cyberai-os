<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>واجهة الدردشة - CyberAI OS</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* أنماط خاصة بصفحة الدردشة */
        .chat-container {
            display: flex;
            height: calc(100vh - 80px);
        }
        
        .sidebar {
            width: 280px;
            background-color: var(--bg-darker);
            border-left: 1px solid var(--bg-lighter);
            display: flex;
            flex-direction: column;
            transition: width var(--transition-normal);
        }
        
        .sidebar-collapsed {
            width: 60px;
        }
        
        .sidebar-header {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--bg-lighter);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .new-chat-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            width: 100%;
            transition: background-color var(--transition-fast);
        }
        
        .new-chat-btn:hover {
            background-color: var(--primary-dark);
        }
        
        .sidebar-collapsed .new-chat-btn span {
            display: none;
        }
        
        .sidebar-toggle {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.2rem;
            padding: var(--spacing-xs);
            transition: color var(--transition-fast);
        }
        
        .sidebar-toggle:hover {
            color: var(--text-light);
        }
        
        .conversations {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-md);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }
        
        .conversation-item {
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: background-color var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            color: var(--text-muted);
        }
        
        .conversation-item:hover {
            background-color: var(--bg-light);
            color: var(--text-light);
        }
        
        .conversation-item.active {
            background-color: var(--bg-light);
            color: var(--text-light);
            font-weight: 600;
        }
        
        .conversation-title {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .sidebar-collapsed .conversation-title {
            display: none;
        }
        
        .conversation-actions {
            display: none;
        }
        
        .conversation-item:hover .conversation-actions {
            display: flex;
            gap: var(--spacing-xs);
        }
        
        .sidebar-footer {
            padding: var(--spacing-md);
            border-top: 1px solid var(--bg-lighter);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .sidebar-collapsed .sidebar-footer span {
            display: none;
        }
        
        .model-selector-container {
            position: relative;
        }
        
        .model-selector-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            transition: color var(--transition-fast);
        }
        
        .model-selector-btn:hover {
            color: var(--text-light);
        }
        
        .model-dropdown {
            position: absolute;
            bottom: 100%;
            right: 0;
            background-color: var(--bg-lighter);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            width: 280px;
            padding: var(--spacing-md);
            display: none;
            z-index: 10;
        }
        
        .model-dropdown.active {
            display: block;
            animation: fadeIn 0.2s ease;
        }
        
        .model-dropdown h4 {
            margin-bottom: var(--spacing-md);
            color: var(--text-light);
        }
        
        .model-options {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }
        
        .model-option {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: background-color var(--transition-fast);
        }
        
        .model-option:hover {
            background-color: var(--bg-light);
        }
        
        .model-option.active {
            background-color: var(--bg-light);
        }
        
        .model-option-icon {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: white;
        }
        
        .model-option-icon.deepseek {
            background-color: #2196f3;
        }
        
        .model-option-icon.together {
            background-color: #4caf50;
        }
        
        .model-option-icon.openrouter {
            background-color: var(--gold);
            color: var(--text-dark);
        }
        
        .model-option-info {
            flex: 1;
        }
        
        .model-option-name {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .model-option-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        .model-option-check {
            color: var(--primary);
            display: none;
        }
        
        .model-option.active .model-option-check {
            display: block;
        }
        
        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-dark);
        }
        
        .chat-header {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--bg-lighter);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-title {
            font-weight: 600;
        }
        
        .chat-header-actions {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .chat-body {
            flex: 1;
            padding: var(--spacing-md);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
        }
        
        .chat-welcome {
            text-align: center;
            max-width: 600px;
            margin: auto;
            padding: var(--spacing-xl) 0;
        }
        
        .chat-welcome h2 {
            font-size: 2rem;
            margin-bottom: var(--spacing-md);
            color: var(--primary);
        }
        
        .chat-welcome p {
            color: var(--text-muted);
            margin-bottom: var(--spacing-lg);
        }
        
        .suggestions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }
        
        .suggestion {
            background-color: var(--bg-lighter);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            cursor: pointer;
            transition: background-color var(--transition-fast), transform var(--transition-fast);
        }
        
        .suggestion:hover {
            background-color: var(--bg-light);
            transform: translateY(-2px);
        }
        
        .suggestion h4 {
            margin-bottom: var(--spacing-sm);
            color: var(--accent);
        }
        
        .suggestion p {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        
        .message-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }
        
        .message-container {
            display: flex;
            gap: var(--spacing-md);
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .message-avatar.user {
            background-color: var(--accent);
        }
        
        .message-content {
            flex: 1;
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            background-color: var(--bg-lighter);
        }
        
        .message-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-sm);
        }
        
        .message-name {
            font-weight: 600;
        }
        
        .message-time {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        .message-text {
            line-height: 1.6;
        }
        
        .message-text p {
            margin-bottom: var(--spacing-sm);
        }
        
        .message-text p:last-child {
            margin-bottom: 0;
        }
        
        .message-text pre {
            background-color: var(--bg-dark);
            padding: var(--spacing-md);
            border-radius: var(--radius-sm);
            overflow-x: auto;
            margin: var(--spacing-md) 0;
            position: relative;
        }
        
        .message-text pre code {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        .message-text pre .copy-btn {
            position: absolute;
            top: var(--spacing-xs);
            left: var(--spacing-xs);
        }
        
        .message-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }
        
        .message-action-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            transition: color var(--transition-fast);
        }
        
        .message-action-btn:hover {
            color: var(--text-light);
        }
        
        .message-action-btn.like:hover {
            color: #4caf50;
        }
        
        .message-action-btn.dislike:hover {
            color: var(--primary);
        }
        
        .chat-input-container {
            padding: var(--spacing-md);
            border-top: 1px solid var(--bg-lighter);
        }
        
        .chat-input-wrapper {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .chat-input {
            width: 100%;
            min-height: 60px;
            max-height: 200px;
            padding: var(--spacing-md) var(--spacing-xl) var(--spacing-md) var(--spacing-md);
            border-radius: var(--radius-md);
            background-color: var(--bg-lighter);
            border: 1px solid transparent;
            color: var(--text-light);
            resize: none;
            overflow-y: auto;
            transition: border-color var(--transition-fast);
        }
        
        .chat-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .chat-input-actions {
            position: absolute;
            bottom: 10px;
            left: 10px;
            display: flex;
            gap: var(--spacing-xs);
        }
        
        .chat-submit-btn {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-full);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color var(--transition-fast), transform var(--transition-fast);
        }
        
        .chat-submit-btn:hover {
            background-color: var(--primary-dark);
            transform: scale(1.05);
        }
        
        .chat-input-tools {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: var(--spacing-sm);
            padding: 0 var(--spacing-sm);
        }
        
        .chat-input-info {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        .chat-input-settings {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .settings-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            transition: color var(--transition-fast);
        }
        
        .settings-btn:hover {
            color: var(--text-light);
        }
        
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: var(--spacing-xs) 0;
        }
        
        .typing-indicator span {
            width: 8px;
            height: 8px;
            background-color: var(--text-muted);
            border-radius: var(--radius-full);
            display: inline-block;
            animation: typing 1s infinite ease-in-out;
        }
        
        .typing-indicator span:nth-child(1) {
            animation-delay: 0s;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 80px;
                right: 0;
                bottom: 0;
                z-index: 90;
                transform: translateX(100%);
                transition: transform var(--transition-normal);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .mobile-sidebar-toggle {
                display: block;
            }
        }
    </style>
</head>
<body class="dark-theme">
    <div class="background-overlay"></div>
    
    <header>
        <div class="logo-container">
            <img src="assets/logo.svg" alt="CyberAI OS Logo" class="logo">
            <h1>CyberAI OS</h1>
        </div>
        <nav>
            <div class="nav-group">
                <button class="nav-dropdown-btn">الرئيسية <i class="fas fa-chevron-down"></i></button>
                <div class="nav-dropdown-content">
                    <a href="index.html">الصفحة الرئيسية</a>
                    <a href="about.html">عن المشروع</a>
                </div>
            </div>
            <div class="nav-group">
                <button class="nav-dropdown-btn">النماذج <i class="fas fa-chevron-down"></i></button>
                <div class="nav-dropdown-content">
                    <a href="models.html">النماذج المحلية</a>
                    <a href="model-manager.html">إدارة النماذج</a>
                </div>
            </div>
            <div class="nav-group">
                <button class="nav-dropdown-btn">الدردشة <i class="fas fa-chevron-down"></i></button>
                <div class="nav-dropdown-content">
                    <a href="chat.html" class="active">واجهة الدردشة</a>
                    <a href="chat-advanced.html">الدردشة المتقدمة</a>
                </div>
            </div>
            <div class="nav-group">
                <button class="nav-dropdown-btn">المطورين <i class="fas fa-chevron-down"></i></button>
                <div class="nav-dropdown-content">
                    <a href="api.html">واجهة API</a>
                    <a href="api-keys.html">مفاتيح API</a>
                    <a href="code-assistant.html">مساعد الأكواد</a>
                </div>
            </div>
            <div class="nav-group">
                <button class="nav-dropdown-btn">المساعدة <i class="fas fa-chevron-down"></i></button>
                <div class="nav-dropdown-content">
                    <a href="setup.html">دليل الإعداد</a>
                    <a href="tools.html">أدوات مساعدة</a>
                    <a href="contact.html">اتصل بنا</a>
                </div>
            </div>
        </nav>
        <div class="header-actions">
            <button id="theme-toggle" class="theme-toggle" aria-label="تبديل السمة">
                <i class="fas fa-moon"></i>
                <i class="fas fa-sun"></i>
            </button>
            <div class="auth-container">
                <a href="login.html" class="login-btn">تسجيل الدخول</a>
                <div class="user-profile" style="display: none;">
                    <div class="user-avatar">A</div>
                    <div class="user-info">
                        <span class="user-name">اسم المستخدم</span>
                        <span class="user-key">sk_cyberai_***</span>
                    </div>
                    <button class="logout-btn"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
        </div>
    </header>

    <div class="chat-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn">
                    <i class="fas fa-plus"></i>
                    <span>محادثة جديدة</span>
                </button>
                <button class="sidebar-toggle">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <div class="conversations">
                <div class="conversation-item active">
                    <i class="fas fa-comments"></i>
                    <div class="conversation-title">محادثة جديدة</div>
                    <div class="conversation-actions">
                        <button class="icon-btn"><i class="fas fa-edit"></i></button>
                        <button class="icon-btn"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
                
                <div class="conversation-item">
                    <i class="fas fa-comments"></i>
                    <div class="conversation-title">شرح مفهوم الذكاء الاصطناعي</div>
                    <div class="conversation-actions">
                        <button class="icon-btn"><i class="fas fa-edit"></i></button>
                        <button class="icon-btn"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
                
                <div class="conversation-item">
                    <i class="fas fa-comments"></i>
                    <div class="conversation-title">كيفية تثبيت نموذج TinyLlama</div>
                    <div class="conversation-actions">
                        <button class="icon-btn"><i class="fas fa-edit"></i></button>
                        <button class="icon-btn"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
                
                <div class="conversation-item">
                    <i class="fas fa-comments"></i>
                    <div class="conversation-title">مقارنة بين نماذج الذكاء الاصطناعي</div>
                    <div class="conversation-actions">
                        <button class="icon-btn"><i class="fas fa-edit"></i></button>
                        <button class="icon-btn"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="model-selector-container">
                    <button class="model-selector-btn">
                        <i class="fas fa-robot"></i>
                        <span>DeepSeek-R1-70B</span>
                        <i class="fas fa-chevron-up"></i>
                    </button>
                    
                    <div class="model-dropdown">
                        <h4>اختر النموذج</h4>
                        <div class="model-options">
                            <div class="model-option active">
                                <div class="model-option-icon deepseek">DS</div>
                                <div class="model-option-info">
                                    <div class="model-option-name">DeepSeek-R1-70B</div>
                                    <div class="model-option-desc">نموذج متقدم للمهام المعقدة</div>
                                </div>
                                <i class="fas fa-check model-option-check"></i>
                            </div>
                            
                            <div class="model-option">
                                <div class="model-option-icon together">TG</div>
                                <div class="model-option-info">
                                    <div class="model-option-name">DeepSeek-R1-Distill-Llama</div>
                                    <div class="model-option-desc">نموذج مقطر للأداء المتوازن</div>
                                </div>
                                <i class="fas fa-check model-option-check"></i>
                            </div>
                            
                            <div class="model-option">
                                <div class="model-option-icon openrouter">OR</div>
                                <div class="model-option-info">
                                    <div class="model-option-name">GPT-4o (OpenRouter)</div>
                                    <div class="model-option-desc">نموذج متعدد الوسائط من OpenAI</div>
                                </div>
                                <i class="fas fa-check model-option-check"></i>
                            </div>
                            
                            <div class="model-option">
                                <div class="model-option-icon" style="background-color: #9c27b0;">LL</div>
                                <div class="model-option-info">
                                    <div class="model-option-name">Llama 2 (7B)</div>
                                    <div class="model-option-desc">نموذج محلي متوسط الحجم</div>
                                </div>
                                <i class="fas fa-check model-option-check"></i>
                            </div>
                            
                            <div class="model-option">
                                <div class="model-option-icon" style="background-color: #ff9800;">TL</div>
                                <div class="model-option-info">
                                    <div class="model-option-name">TinyLlama (1.1B)</div>
                                    <div class="model-option-desc">نموذج محلي خفيف للأجهزة المحدودة</div>
                                </div>
                                <i class="fas fa-check model-option-check"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="icon-btn">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>
        
        <div class="chat-main">
            <div class="chat-header">
                <div class="chat-title">محادثة جديدة</div>
                <div class="chat-header-actions">
                    <button class="icon-btn mobile-sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <button class="icon-btn">
                        <i class="fas fa-share"></i>
                    </button>
                    <button class="icon-btn">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="icon-btn">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            
            <div class="chat-body">
                <div class="chat-welcome">
                    <h2>مرحباً بك في CyberAI OS</h2>
                    <p>استخدم واجهة الدردشة للتفاعل مع نماذج الذكاء الاصطناعي المحلية والسحابية. اختر النموذج المناسب لاحتياجاتك من القائمة الجانبية.</p>
                    
                    <div class="suggestions">
                        <div class="suggestion">
                            <h4>شرح مفهوم</h4>
                            <p>اشرح لي مفهوم الشبكات العصبية الالتفافية بطريقة مبسطة</p>
                        </div>
                        
                        <div class="suggestion">
                            <h4>كتابة كود</h4>
                            <p>اكتب لي كود Python لتحليل المشاعر في النصوص العربية</p>
                        </div>
                        
                        <div class="suggestion">
                            <h4>حل مشكلة</h4>
                            <p>كيف يمكنني تحسين أداء نموذج TinyLlama على جهازي؟</p>
                        </div>
                        
                        <div class="suggestion">
                            <h4>مقارنة</h4>
                            <p>قارن بين نماذج DeepSeek وLlama من حيث الأداء والدقة</p>
                        </div>
                    </div>
                </div>
                
                <!-- نموذج للمحادثة -->
                <div class="message-group" style="display: none;">
                    <div class="message-container">
                        <div class="message-avatar user">أ</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-name">أنت</div>
                                <div class="message-time">12:30</div>
                            </div>
                            <div class="message-text">
                                <p>اشرح لي مفهوم الشبكات العصبية الالتفافية بطريقة مبسطة</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="message-group" style="display: none;">
                    <div class="message-container">
                        <div class="message-avatar">AI</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-name">DeepSeek-R1-70B</div>
                                <div class="message-time">12:31</div>
                            </div>
                            <div class="message-text">
                                <p>الشبكات العصبية الالتفافية (CNN) هي نوع من أنواع الشبكات العصبية الاصطناعية المصممة خصيصًا لمعالجة البيانات المنظمة في شكل شبكي، مثل الصور.</p>
                                
                                <p>لتبسيط الفكرة، تخيل أنك تنظر إلى صورة من خلال نافذة صغيرة متحركة. هذه النافذة تتحرك عبر الصورة وتلتقط أنماطًا محددة في كل موقع. هذه العملية تسمى "الالتفاف" (Convolution).</p>
                                
                                <p>المكونات الرئيسية للشبكات العصبية الالتفافية هي:</p>
                                
                                <p>1. <strong>طبقات الالتفاف (Convolutional Layers)</strong>: تقوم بتطبيق مرشحات (filters) على الصورة لاكتشاف الميزات مثل الحواف والأنماط البسيطة في الطبقات الأولى، ثم الأشكال والأنماط المعقدة في الطبقات العميقة.</p>
                                
                                <p>2. <strong>طبقات التجميع (Pooling Layers)</strong>: تقلل من أبعاد البيانات مع الاحتفاظ بالمعلومات المهمة، مما يقلل من التعقيد الحسابي ويساعد في جعل النموذج أكثر قوة.</p>
                                
                                <p>3. <strong>طبقات متصلة بالكامل (Fully Connected Layers)</strong>: تأتي عادة في نهاية الشبكة وتستخدم لتصنيف الصورة بناءً على الميزات المستخرجة.</p>
                                
                                <p>مثال بسيط: عندما تتعرف على وجه صديق، فإن عقلك لا ينظر إلى الصورة كاملة دفعة واحدة، بل يلتقط ميزات مثل شكل العينين، الأنف، الفم، ثم يجمع هذه الميزات معًا للتعرف على الشخص. الشبكات العصبية الالتفافية تعمل بطريقة مشابهة.</p>
                                
                                <p>هذه الشبكات فعالة جدًا في مهام مثل التعرف على الصور، اكتشاف الأجسام، تصنيف الصور، والعديد من تطبيقات الرؤية الحاسوبية الأخرى.</p>
                            </div>
                            <div class="message-actions">
                                <button class="message-action-btn like">
                                    <i class="far fa-thumbs-up"></i>
                                    <span>إعجاب</span>
                                </button>
                                <button class="message-action-btn dislike">
                                    <i class="far fa-thumbs-down"></i>
                                    <span>عدم إعجاب</span>
                                </button>
                                <button class="message-action-btn">
                                    <i class="far fa-copy"></i>
                                    <span>نسخ</span>
                                </button>
                                <button class="message-action-btn">
                                    <i class="fas fa-share"></i>
                                    <span>مشاركة</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="message-group" style="display: none;">
                    <div class="message-container">
                        <div class="message-avatar user">أ</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-name">أنت</div>
                                <div class="message-time">12:33</div>
                            </div>
                            <div class="message-text">
                                <p>هل يمكنك كتابة كود Python بسيط لتنفيذ شبكة عصبية التفافية؟</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="message-group" style="display: none;">
                    <div class="message-container">
                        <div class="message-avatar">AI</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-name">DeepSeek-R1-70B</div>
                                <div class="message-time">12:34</div>
                            </div>
                            <div class="message-text">
                                <p>بالتأكيد! إليك كود Python بسيط لتنفيذ شبكة عصبية التفافية باستخدام مكتبة PyTorch لتصنيف صور MNIST (أرقام مكتوبة بخط اليد):</p>
                                
                                <pre><code>import torch
import torch.nn as nn
import torch.optim as optim
import torchvision
import torchvision.transforms as transforms

# تحديد الجهاز (GPU إذا كان متاحًا)
device = torch.device("cuda:0" if torch.cuda.is_available() else "cpu")

# تحويل البيانات وتحميلها
transform = transforms.Compose([
    transforms.ToTensor(),
    transforms.Normalize((0.5,), (0.5,))
])

trainset = torchvision.datasets.MNIST(root='./data', train=True,
                                     download=True, transform=transform)
trainloader = torch.utils.data.DataLoader(trainset, batch_size=64,
                                         shuffle=True)

testset = torchvision.datasets.MNIST(root='./data', train=False,
                                    download=True, transform=transform)
testloader = torch.utils.data.DataLoader(testset, batch_size=64,
                                        shuffle=False)

# تعريف الشبكة العصبية الالتفافية
class SimpleCNN(nn.Module):
    def __init__(self):
        super(SimpleCNN, self).__init__()
        # طبقة التفافية أولى: 1 قناة إدخال، 32 مرشح، حجم النواة 3×3
        self.conv1 = nn.Conv2d(1, 32, 3, padding=1)
        # طبقة تجميع: تقليل الأبعاد بمعامل 2
        self.pool = nn.MaxPool2d(2, 2)
        # طبقة التفافية ثانية: 32 قناة إدخال، 64 مرشح
        self.conv2 = nn.Conv2d(32, 64, 3, padding=1)
        # طبقات متصلة بالكامل
        self.fc1 = nn.Linear(64 * 7 * 7, 128)
        self.fc2 = nn.Linear(128, 10)
        # دالة التنشيط
        self.relu = nn.ReLU()

    def forward(self, x):
        # تطبيق طبقة التفاف أولى + تنشيط + تجميع
        x = self.pool(self.relu(self.conv1(x)))
        # تطبيق طبقة التفاف ثانية + تنشيط + تجميع
        x = self.pool(self.relu(self.conv2(x)))
        # إعادة تشكيل البيانات للطبقات المتصلة بالكامل
        x = x.view(-1, 64 * 7 * 7)
        # تطبيق الطبقات المتصلة بالكامل
        x = self.relu(self.fc1(x))
        x = self.fc2(x)
        return x

# إنشاء نموذج الشبكة ونقله إلى الجهاز
model = SimpleCNN().to(device)

# تحديد دالة الخسارة ومحسن التعلم
criterion = nn.CrossEntropyLoss()
optimizer = optim.Adam(model.parameters(), lr=0.001)

# تدريب النموذج
def train_model(epochs=5):
    for epoch in range(epochs):
        running_loss = 0.0
        for i, data in enumerate(trainloader, 0):
            inputs, labels = data
            inputs, labels = inputs.to(device), labels.to(device)
            
            # تصفير التدرجات
            optimizer.zero_grad()
            
            # التغذية الأمامية + حساب الخسارة + التغذية الخلفية + تحديث الأوزان
            outputs = model(inputs)
            loss = criterion(outputs, labels)
            loss.backward()
            optimizer.step()
            
            # طباعة إحصائيات
            running_loss += loss.item()
            if i % 100 == 99:
                print(f'[{epoch + 1}, {i + 1}] loss: {running_loss / 100:.3f}')
                running_loss = 0.0
    
    print('انتهى التدريب!')

# اختبار النموذج
def test_model():
    correct = 0
    total = 0
    with torch.no_grad():
        for data in testloader:
            images, labels = data
            images, labels = images.to(device), labels.to(device)
            outputs = model(images)
            _, predicted = torch.max(outputs.data, 1)
            total += labels.size(0)
            correct += (predicted == labels).sum().item()
    
    print(f'دقة النموذج على 10000 صورة اختبار: {100 * correct / total:.2f}%')

# تشغيل التدريب والاختبار
train_model(epochs=5)
test_model()</code><button class="copy-btn"><i class="fas fa-copy"></i></button></pre>
                                
                                <p>هذا الكود يقوم بما يلي:</p>
                                <p>1. تحميل بيانات MNIST وتحويلها إلى التنسيق المناسب</p>
                                <p>2. تعريف شبكة عصبية التفافية بسيطة تتكون من:</p>
                                <p>   - طبقتي التفاف (Convolutional layers)</p>
                                <p>   - طبقتي تجميع (Pooling layers)</p>
                                <p>   - طبقتين متصلتين بالكامل (Fully connected layers)</p>
                                <p>3. تدريب النموذج لمدة 5 دورات (epochs)</p>
                                <p>4. اختبار النموذج على مجموعة بيانات الاختبار</p>
                                
                                <p>هذا النموذج البسيط يمكن أن يحقق دقة تصل إلى حوالي 98-99% على مجموعة بيانات MNIST.</p>
                            </div>
                            <div class="message-actions">
                                <button class="message-action-btn like">
                                    <i class="far fa-thumbs-up"></i>
                                    <span>إعجاب</span>
                                </button>
                                <button class="message-action-btn dislike">
                                    <i class="far fa-thumbs-down"></i>
                                    <span>عدم إعجاب</span>
                                </button>
                                <button class="message-action-btn">
                                    <i class="far fa-copy"></i>
                                    <span>نسخ</span>
                                </button>
                                <button class="message-action-btn">
                                    <i class="fas fa-share"></i>
                                    <span>مشاركة</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea class="chat-input" placeholder="اكتب رسالتك هنا... (اضغط Shift + Enter لإضافة سطر جديد)"></textarea>
                    <button class="chat-submit-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                
                <div class="chat-input-tools">
                    <div class="chat-input-info">
                        <span>DeepSeek-R1-70B</span> • <span>استخدام API</span>
                    </div>
                    <div class="chat-input-settings">
                        <button class="settings-btn">
                            <i class="fas fa-image"></i>
                            <span>إرفاق صورة</span>
                        </button>
                        <button class="settings-btn">
                            <i class="fas fa-microphone"></i>
                            <span>تسجيل صوتي</span>
                        </button>
                        <button class="settings-btn">
                            <i class="fas fa-sliders-h"></i>
                            <span>إعدادات</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // تبديل القائمة الجانبية
        document.querySelector('.sidebar-toggle').addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('sidebar-collapsed');
        });
        
        // تبديل قائمة النماذج
        document.querySelector('.model-selector-btn').addEventListener('click', function(e) {
            e.stopPropagation();
            document.querySelector('.model-dropdown').classList.toggle('active');
        });
        
        // إغلاق قائمة النماذج عند النقر خارجها
        document.addEventListener('click', function() {
            document.querySelector('.model-dropdown').classList.remove('active');
        });
        
        // منع إغلاق قائمة النماذج عند النقر داخلها
        document.querySelector('.model-dropdown').addEventListener('click', function(e) {
            e.stopPropagation();
        });
        
        // اختيار نموذج
        document.querySelectorAll('.model-option').forEach(function(option) {
            option.addEventListener('click', function() {
                document.querySelectorAll('.model-option').forEach(function(opt) {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
                
                const modelName = this.querySelector('.model-option-name').textContent;
                document.querySelector('.model-selector-btn span').textContent = modelName;
                document.querySelector('.chat-input-info span:first-child').textContent = modelName;
                document.querySelector('.model-dropdown').classList.remove('active');
            });
        });
        
        // تبديل السمة
        document.getElementById('theme-toggle').addEventListener('click', function() {
            document.body.classList.toggle('light-theme');
        });
        
        // اقتراحات الدردشة
        document.querySelectorAll('.suggestion').forEach(function(suggestion) {
            suggestion.addEventListener('click', function() {
                const text = this.querySelector('p').textContent;
                document.querySelector('.chat-input').value = text;
                document.querySelector('.chat-input').focus();
            });
        });
        
        // إرسال الرسالة
        document.querySelector('.chat-submit-btn').addEventListener('click', function() {
            const input = document.querySelector('.chat-input');
            const message = input.value.trim();
            
            if (message) {
                // إخفاء شاشة الترحيب
                document.querySelector('.chat-welcome').style.display = 'none';
                
                // إظهار المحادثة
                document.querySelectorAll('.message-group').forEach(function(group) {
                    group.style.display = 'block';
                });
                
                // مسح حقل الإدخال
                input.value = '';
                input.focus();
            }
        });
        
        // تعديل ارتفاع حقل الإدخال تلقائيًا
        document.querySelector('.chat-input').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
    </script>
</body>
</html>
